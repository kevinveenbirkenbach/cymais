---
- name: "include service-rdbms-central"
  include_role: 
    name: service-rdbms-central

- name: "include role srv-web-proxy-domain for {{application_id}}"
  include_role:
    name: srv-web-proxy-domain
  vars:
    domain:   "{{ domains | get_domain(application_id) }}"
    http_port:   "{{ ports.localhost.http[application_id] }}"

- name: "include tasks update-repository-with-files.yml"
  include_tasks: update-repository-with-files.yml
  vars:
    detached_files: 
      - "docker-compose.yml"

- name: "create {{docker_compose.files.env}}"
  template: 
    src:  "env.j2" 
    dest: "{{docker_compose.files.env}}"
    mode: '770'
    force: yes
  notify: docker compose up
