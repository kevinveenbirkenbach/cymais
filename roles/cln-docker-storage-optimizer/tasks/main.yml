- name: "create {{storage_optimizer_directory}}"
  file:
    path: "{{storage_optimizer_directory}}"
    state: directory
    mode: 0755

- name: create cln-docker-storage-optimizer.cymais.service
  template: 
    src: cln-docker-storage-optimizer.service.j2
    dest: /etc/systemd/system/cln-docker-storage-optimizer.cymais.service
  notify: reload cln-docker-storage-optimizer.cymais.service

- name: create cln-docker-storage-optimizer.py
  copy: 
    src: cln-docker-storage-optimizer.py
    dest: "{{storage_optimizer_script}}"
    mode: 0755

- name: "optimize storage performance"
  systemd:
    name: cln-docker-storage-optimizer.cymais.service
    state: started