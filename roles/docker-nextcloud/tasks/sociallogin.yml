# @See https://chatgpt.com/share/6798189e-9c00-800f-923c-5ce3cfbdf405
- name: Load Sociallogin configuration variables
  include_vars:
    file: sociallogin.yml

- name: Configure Sociallogin
  loop: "{{ nextcloud_sociallogin_configuration}}"
  # The | to_json function is necessary to escape custom_providers correct.
  command: >
    docker exec -u www-data {{ applications.nextcloud.container.application }}
    php occ config:app:set {{ item.appid }} {{ item.configkey }} --value '{{ item.configvalue | to_json if item.configvalue is mapping else item.configvalue }}'