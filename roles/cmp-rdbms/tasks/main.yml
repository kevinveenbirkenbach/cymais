# The following env file will just be used from the dedicated mariadb container
# and not the {{applications['mariadb'].hostname }}-database
- name: "Create {{database_env}}"
  template: 
    src: "env/{{database_type}}.env.j2"
    dest: "{{database_env}}"
  notify: docker compose up
  when: not applications | is_feature_enabled('central_database',application_id)

- name: "Create central database"
  include_role:
    name: "svc-{{database_type}}"
  when: applications | is_feature_enabled('central_database',application_id)

#- name: "Create central database"
#  include_tasks: "{{ playbook_dir }}/roles/svc-{{database_type}}/tasks/main.yml"
#  when: applications | is_feature_enabled('central_database',application_id)

- name: "Add database to backup"
  include_tasks: "{{ playbook_dir }}/roles/sys-bkp-docker-to-local/tasks/seed-database-to-backup.yml"