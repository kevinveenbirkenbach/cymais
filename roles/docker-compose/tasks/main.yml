- name: "Load variables from {{ docker_compose_variable_file }} for whole play"
  include_vars: "{{ docker_compose_variable_file }}"

- name: "reset (if enabled)"
  include_tasks: reset.yml 
  when: mode_reset | bool

# This could lead to problems in docker-compose directories which are based on a git repository
# @todo Verify that this isn't the case. E.g. in accounting
- name: "Create all docker-compose directories (including parent directories)"
  file:
    path: "{{ item.value }}"
    state: directory
    mode: '0755'
  with_dict: "{{ docker_compose.directories }}"

- include_tasks: "repository.yml"
  when: docker_repository | bool

- include_tasks: "files.yml"
  when: not docker_compose_skipp_file_creation | bool